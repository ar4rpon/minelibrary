# Laravel 12Ê∫ñÊã† ÁßªË°åÂÆüË£ÖË®àÁîª

## üóÇÔ∏è ÁèæÂú® ‚Üí ÁõÆÊ®ôÊßãÊàê„ÅÆÂèØË¶ñÂåñ

### ÁèæÂú®„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê
```mermaid
graph TD
    A[resources/ts/] --> B[Services/]
    A --> C[components/]
    A --> D[features/]
    A --> E[lib/]
    A --> F[types/]
    
    C --> C1[book/]
    C --> C2[bookshelf/]
    C --> C3[common/]
    C --> C4[memo/]
    
    D --> D1[auth/]
    D --> D2[book/]
    D --> D3[bookshelf/]
    D --> D4[memo/]
    
    D2 --> D2A[pages/]
    D2 --> D2B[hooks/]
    D2 --> D2C[components/]
```

### ÁõÆÊ®ô„ÅÆLaravel 12Êã°ÂºµÊßãÊàê
```mermaid
graph TD
    A[resources/js/] --> B[api/]
    A --> C[components/]
    A --> D[hooks/]
    A --> E[layouts/]
    A --> F[lib/]
    A --> G[pages/]
    A --> H[stores/]
    A --> I[types/]
    A --> J[utils/]
    
    B --> B1[client/]
    B --> B2[services/]
    B --> B3[hooks/]
    
    C --> C1[ui/]
    C --> C2[common/]
    C --> C3[domain/]
    
    C3 --> C3A[book/]
    C3 --> C3B[bookshelf/]
    C3 --> C3C[memo/]
    
    D --> D1[common/]
    D --> D2[domain/]
    
    G --> G1[Auth/]
    G --> G2[Book/]
    G --> G3[BookShelf/]
    G --> G4[Memo/]
    
    I --> I1[api/]
    I --> I2[domain/]
    I --> I3[ui/]
```

## üìã Ë©≥Á¥∞ÁßªË°åÊâãÈ†Ü

### Phase 1: Âü∫Áõ§ÁßªË°å (Week 1-2)

#### Step 1.1: „Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÈÄ†‰ΩúÊàê
```bash
# Laravel 12Ê∫ñÊã†„Éô„Éº„Çπ‰ΩúÊàê
mkdir -p resources/js/{api/{client,services,hooks},stores,utils}
mkdir -p resources/js/components/{ui,common,domain/{book,bookshelf,memo}}
mkdir -p resources/js/hooks/{common,domain}
mkdir -p resources/js/layouts
mkdir -p resources/js/pages/{Auth,Book,BookShelf,Memo,Profile}
mkdir -p resources/js/types/{api,domain,ui}

# Êó¢Â≠ò„Éï„Ç°„Ç§„É´„ÅÆ„Ç≥„Éî„ÉºÔºà„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÔºâ
cp -r resources/ts resources/js-backup
```

#### Step 1.2: Ë®≠ÂÆö„Éï„Ç°„Ç§„É´Êõ¥Êñ∞
```typescript
// vite.config.ts
export default defineConfig({
    plugins: [
        laravel({
            input: 'resources/js/app.tsx', // ts ‚Üí js
            refresh: true,
        }),
        react(),
    ],
});

// tsconfig.json
{
    "compilerOptions": {
        "baseUrl": ".",
        "paths": {
            "@/*": ["resources/js/*"] // ts ‚Üí js
        }
    },
    "include": ["resources/js/**/*"] // ts ‚Üí js
}
```

### Phase 2: APIÂ±§Áµ±‰∏Ä (Week 3)

#### Step 2.1: API„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÁµ±‰∏Ä
```typescript
// resources/js/api/client/axios.ts
import axios from 'axios';
import { ApiErrorHandler } from '@/lib/errors';

const apiClient = axios.create({
    baseURL: '/api',
    timeout: 10000,
    headers: {
        'Content-Type': 'application/json',
        'X-Requested-With': 'XMLHttpRequest',
    },
});

// „É™„ÇØ„Ç®„Çπ„Éà„Ç§„É≥„Çø„Éº„Çª„Éó„Çø„Éº
apiClient.interceptors.request.use(
    (config) => {
        const token = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
        if (token) {
            config.headers['X-CSRF-TOKEN'] = token;
        }
        return config;
    },
    (error) => Promise.reject(error)
);

// „É¨„Çπ„Éù„É≥„Çπ„Ç§„É≥„Çø„Éº„Çª„Éó„Çø„Éº
apiClient.interceptors.response.use(
    (response) => response,
    (error) => {
        ApiErrorHandler.handle(error, 'API Request');
        return Promise.reject(error);
    }
);

export { apiClient };
```

#### Step 2.2: „Éâ„É°„Ç§„É≥„Çµ„Éº„Éì„ÇπÁßªË°å
```typescript
// resources/js/api/services/book.service.ts
import { apiClient } from '@/api/client/axios';
import { Book, BookSearchParams } from '@/types/domain/book';

export class BookService {
    static async search(params: BookSearchParams): Promise<Book[]> {
        const response = await apiClient.get('/books/search', { params });
        return response.data.books;
    }

    static async create(bookData: Partial<Book>): Promise<Book> {
        const response = await apiClient.post('/books', bookData);
        return response.data.book;
    }

    static async addToFavorites(isbn: string): Promise<void> {
        await apiClient.post(`/books/${isbn}/favorite`);
    }

    static async updateReadStatus(isbn: string, status: string): Promise<void> {
        await apiClient.put(`/books/${isbn}/status`, { status });
    }
}
```

### Phase 3: „Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂÜçÁ∑®Êàê (Week 4-5)

#### Step 3.1: Áµ±‰∏ÄBaseCardÂÆüË£Ö
```typescript
// resources/js/components/common/BaseCard.tsx
import { Card } from '@/components/ui/card';
import { cn } from '@/lib/utils';
import React from 'react';

type CardVariant = 
  | 'book-default' 
  | 'book-favorite' 
  | 'book-shelf' 
  | 'bookshelf-card' 
  | 'bookshelf-description'
  | 'memo-card';

interface BaseCardProps {
    variant?: CardVariant;
    className?: string;
    children: React.ReactNode;
    onClick?: () => void;
}

export function BaseCard({ 
    variant = 'book-default', 
    className,
    children, 
    onClick 
}: BaseCardProps) {
    const cardStyles = {
        'book-default': 'mx-auto w-full max-w-4xl overflow-hidden p-4 md:p-6',
        'book-favorite': 'mx-auto w-full p-4',
        'book-shelf': 'mx-auto w-full p-4',
        'bookshelf-card': 'mx-auto w-full overflow-hidden',
        'bookshelf-description': 'mx-auto w-full mt-4 min-h-40 border border-green-600 px-4 py-2 shadow-md md:py-4',
        'memo-card': 'mx-auto w-full p-4 hover:shadow-md transition-shadow'
    };

    const contentStyles = {
        'book-default': 'flex flex-col gap-4 md:flex-row lg:flex-col',
        'book-favorite': 'relative grid gap-4 sm:grid-cols-[200px_1fr]',
        'book-shelf': 'relative grid gap-4 sm:grid-cols-[200px_1fr]',
        'bookshelf-card': 'p-4 md:p-6',
        'bookshelf-description': 'flex flex-col gap-4',
        'memo-card': 'flex flex-col gap-2'
    };

    return (
        <Card 
            className={cn(cardStyles[variant], className)}
            onClick={onClick}
        >
            <div className={contentStyles[variant]}>
                {children}
            </div>
        </Card>
    );
}
```

#### Step 3.2: „Éâ„É°„Ç§„É≥„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÁßªË°å
```typescript
// resources/js/components/domain/book/BookCard.tsx
import { BaseCard } from '@/components/common/BaseCard';
import { Book } from '@/types/domain/book';
import { useBookCard } from '@/hooks/domain/useBook';

interface BookCardProps {
    book: Book;
    variant?: 'default' | 'favorite' | 'shelf';
    onFavoriteToggle?: (isbn: string) => void;
    onStatusUpdate?: (isbn: string, status: string) => void;
}

export function BookCard({ 
    book, 
    variant = 'default',
    onFavoriteToggle,
    onStatusUpdate 
}: BookCardProps) {
    const { dialogs, actions } = useBookCard(book);

    return (
        <BaseCard variant={`book-${variant}`}>
            {/* BookCardÂõ∫Êúâ„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ */}
        </BaseCard>
    );
}
```

### Phase 4: „Éï„ÉÉ„ÇØÁµ±‰∏Ä (Week 6)

#### Step 4.1: ÂÖ±ÈÄö„ÉÄ„Ç§„Ç¢„É≠„Ç∞„Éï„ÉÉ„ÇØ
```typescript
// resources/js/hooks/common/useDialogState.ts
import { useState, useCallback } from 'react';

export interface DialogControls {
    isOpen: boolean;
    open: () => void;
    close: () => void;
}

export function useDialogState(initialState = false): DialogControls {
    const [isOpen, setIsOpen] = useState(initialState);

    const open = useCallback(() => setIsOpen(true), []);
    const close = useCallback(() => setIsOpen(false), []);

    return { isOpen, open, close };
}

export function useMultipleDialogs<T extends readonly string[]>(
    dialogNames: T
): Record<T[number], DialogControls> {
    const [states, setStates] = useState<Record<string, boolean>>(
        dialogNames.reduce((acc, name) => ({ ...acc, [name]: false }), {})
    );

    const controls = {} as Record<T[number], DialogControls>;
    
    dialogNames.forEach(name => {
        controls[name] = {
            isOpen: states[name] || false,
            open: useCallback(() => {
                setStates(prev => ({ ...prev, [name]: true }));
            }, [name]),
            close: useCallback(() => {
                setStates(prev => ({ ...prev, [name]: false }));
            }, [name])
        };
    });

    return controls;
}
```

#### Step 4.2: „Éâ„É°„Ç§„É≥„Éï„ÉÉ„ÇØÁµ±‰∏Ä
```typescript
// resources/js/hooks/domain/useBook.ts
import { useMultipleDialogs } from '@/hooks/common/useDialogState';
import { useAsyncState } from '@/api/hooks/useAsyncState';
import { BookService } from '@/api/services/book.service';
import { Book, ReadStatus } from '@/types/domain/book';
import { useState } from 'react';

const DIALOG_NAMES = ['detail', 'readStatus', 'createBookShelf', 'delete', 'createMemo'] as const;

export function useBook(book: Book) {
    const dialogs = useMultipleDialogs(DIALOG_NAMES);
    const { execute, loading, error } = useAsyncState();
    const [readStatus, setReadStatus] = useState<ReadStatus>(book.read_status || 'want_read');

    const actions = {
        updateStatus: async (status: ReadStatus) => {
            await execute(() => BookService.updateReadStatus(book.isbn, status));
            setReadStatus(status);
        },
        
        toggleFavorite: async () => {
            await execute(() => BookService.addToFavorites(book.isbn));
        },
        
        createMemo: async (content: string) => {
            await execute(() => BookService.createMemo(book.isbn, content));
        }
    };

    return {
        dialogs,
        readStatus: {
            current: readStatus,
            update: actions.updateStatus
        },
        actions,
        state: { loading, error }
    };
}
```

### Phase 5: ÂûãÂÆöÁæ©Êï¥ÁêÜ (Week 7)

#### Step 5.1: „Éâ„É°„Ç§„É≥ÂûãÂÆöÁæ©
```typescript
// resources/js/types/domain/book.ts
export interface Book {
    isbn: string;
    title: string;
    author: string;
    publisher_name: string;
    sales_date: string;
    image_url: string;
    item_caption: string;
    item_price: number;
    read_status?: ReadStatus;
    is_favorite?: boolean;
}

export type ReadStatus = 'want_read' | 'reading' | 'finished';

export interface BookSearchParams {
    keyword?: string;
    genre?: string;
    author?: string;
    page?: number;
    limit?: number;
}

export interface BookCardProps {
    book: Book;
    variant?: 'default' | 'favorite' | 'shelf';
    onFavoriteToggle?: (isbn: string) => void;
    onStatusUpdate?: (isbn: string, status: ReadStatus) => void;
}
```

#### Step 5.2: APIÂûãÂÆöÁæ©
```typescript
// resources/js/types/api/book.ts
import { Book, ReadStatus } from '@/types/domain/book';

export interface BookSearchResponse {
    books: Book[];
    pagination: {
        current_page: number;
        last_page: number;
        per_page: number;
        total: number;
    };
}

export interface BookCreateRequest {
    isbn: string;
    title: string;
    author: string;
    publisher_name: string;
    sales_date: string;
    image_url: string;
    item_caption: string;
    item_price: number;
}

export interface BookStatusUpdateRequest {
    status: ReadStatus;
}
```

## üîß ÁßªË°å„ÉÅ„Çß„ÉÉ„ÇØ„É™„Çπ„Éà

### Phase 1 ÂÆå‰∫Ü„ÉÅ„Çß„ÉÉ„ÇØ
- [ ] `resources/js/` „Éá„Ç£„É¨„ÇØ„Éà„É™‰ΩúÊàê
- [ ] Âü∫Êú¨ÊßãÈÄ†‰ΩúÊàêÂÆå‰∫Ü
- [ ] ViteË®≠ÂÆöÊõ¥Êñ∞
- [ ] TypeScriptË®≠ÂÆöÊõ¥Êñ∞
- [ ] „Ç§„É≥„Éù„Éº„Éà„Éë„ÇπÊõ¥Êñ∞

### Phase 2 ÂÆå‰∫Ü„ÉÅ„Çß„ÉÉ„ÇØ
- [ ] API„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÁµ±‰∏Ä
- [ ] „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞Áµ±‰∏Ä
- [ ] „Çµ„Éº„Éì„ÇπÂ±§ÁßªË°åÂÆå‰∫Ü
- [ ] ÈùûÂêåÊúüÁä∂ÊÖãÁÆ°ÁêÜ„Éï„ÉÉ„ÇØ‰ΩúÊàê

### Phase 3 ÂÆå‰∫Ü„ÉÅ„Çß„ÉÉ„ÇØ
- [ ] Áµ±‰∏ÄBaseCardÂÆüË£Ö
- [ ] „Éâ„É°„Ç§„É≥„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÁßªË°å
- [ ] UI primitivesÊï¥ÁêÜ
- [ ] Êó¢Â≠ò„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÁΩÆ„ÅçÊèõ„Åà

### Phase 4 ÂÆå‰∫Ü„ÉÅ„Çß„ÉÉ„ÇØ
- [ ] ÂÖ±ÈÄö„ÉÄ„Ç§„Ç¢„É≠„Ç∞„Éï„ÉÉ„ÇØÂÆüË£Ö
- [ ] „Éâ„É°„Ç§„É≥„Éï„ÉÉ„ÇØÁµ±‰∏Ä
- [ ] Êó¢Â≠ò„Éï„ÉÉ„ÇØÁΩÆ„ÅçÊèõ„Åà
- [ ] Áä∂ÊÖãÁÆ°ÁêÜ„Éë„Çø„Éº„É≥Áµ±‰∏Ä

### Phase 5 ÂÆå‰∫Ü„ÉÅ„Çß„ÉÉ„ÇØ
- [ ] „Éâ„É°„Ç§„É≥ÂûãÂÆöÁæ©Êï¥ÁêÜ
- [ ] APIÂûãÂÆöÁæ©ÂàÜÈõ¢
- [ ] UIÂûãÂÆöÁæ©Êï¥ÁêÜ
- [ ] ÂûãÂÆâÂÖ®ÊÄßÁ¢∫‰øù

## üß™ ÂìÅË≥™‰øùË®º

### „ÉÜ„Çπ„ÉàÊà¶Áï•
```typescript
// ÂêÑPhaseÂÆå‰∫ÜÊôÇ„ÅÆÊ§úË®º
describe('Migration Phase Tests', () => {
    it('should maintain all existing functionality', () => {
        // Êó¢Â≠òÊ©üËÉΩ„ÅåÊ≠£Â∏∏Âãï‰Ωú„Åô„Çã„Åì„Å®
    });

    it('should have no TypeScript errors', () => {
        // TypeScript„Ç®„É©„Éº„Åå0‰ª∂„Åß„ÅÇ„Çã„Åì„Å®
    });

    it('should pass all existing tests', () => {
        // Êó¢Â≠ò„ÉÜ„Çπ„Éà„ÅåÂÖ®„Å¶ÈÄöÈÅé„Åô„Çã„Åì„Å®
    });
});
```

### „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ
- Bundle size tracking
- Render performance monitoring
- Memory usage analysis
- Network request optimization

## üöÄ „É™„É™„Éº„ÇπÊà¶Áï•

### ÊÆµÈöéÁöÑ„É™„É™„Éº„Çπ
1. **Development**: ÂêÑPhaseÂÆå‰∫ÜÊôÇ„ÅÆÂÜÖÈÉ®„ÉÜ„Çπ„Éà
2. **Staging**: Áµ±Âêà„ÉÜ„Çπ„Éà„Å®ÂìÅË≥™Ê§úË®º
3. **Production**: „Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ ‚Üí ÊÆµÈöéÁöÑÂ±ïÈñã

### „É≠„Éº„É´„Éê„ÉÉ„ÇØË®àÁîª
- ÂêÑPhase„Åß„ÅÆ„Çπ„Éä„ÉÉ„Éó„Ç∑„Éß„ÉÉ„Éà‰ΩúÊàê
- Ê©üËÉΩ„Éï„É©„Ç∞„Å´„Çà„ÇãÈÉ®ÂàÜ„É≠„Éº„É´„Éê„ÉÉ„ÇØ
- „Éá„Éº„Çø„Éô„Éº„Çπ‰∫íÊèõÊÄßÁ¢∫‰øù

---

*„Åì„ÅÆÁßªË°åË®àÁîª„Å´„Çà„Çä„ÄÅLaravel 12Ê®ôÊ∫ñ„Å´Ê∫ñÊã†„Åó„Å§„Å§„ÄÅÁèæÂú®„ÅÆË≥áÁî£„ÇíÊúÄÂ§ßÈôêÊ¥ªÁî®„Åó„ÅüÊúÄÈÅ©„Å™ÊßãÊàê„ÇíÂÆüÁèæ„Åó„Åæ„Åô„ÄÇ*